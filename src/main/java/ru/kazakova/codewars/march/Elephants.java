package ru.kazakova.codewars.march;

public class Elephants {

    /**
     * https://www.codewars.com/kata/5830e55fa317216de000001b/train/java
     * <p>
     * сколько слонов удержит паутина, если мы положим их одного за другим, не разрывая?
     * <p>
     * слоны любят создавать сверхвысокие пирамиды, поэтому на каждом уровне сооружения помещается на одного слона меньше,
     * чем на предыдущем.
     * слоны, сидящие в первом ряду, весят 1000 кг, те, что сидят во втором ряду, весят 2000 кг и так далее.
     * Когда ряды заполняются слонами, следующие слоны поднимаются на один уровень и весят на 1000 кг больше, чем предыдущие.
     */

    private int strength;
    private int width;

    public Elephants(int strength, int width) {
        this.strength = strength;
        this.width = width;
    }


    /**
     * В этой задаче нужно определить, сколько слонов сможет выдержать паутина без разрыва.
     * Предполагается, что паутина определяется двумя переменными: прочностью и длиной.
     * Прочность измеряется в килограммах, которые паутина может выдержать.
     * Каждый дополнительный килограмм веса, который добавляется к прочности, приведет к разрыву паутины.
     *
     * Длина определяется как количество слонов, которые могут поместиться один за другим на паутине.
     * Следует учитывать, что слоны предпочитают создавать высокие пирамиды, поэтому на каждом уровне структуры помещается на одного слона меньше, чем на предыдущем.
     *
     * Каждый слон на первом уровне весит 1000 кг, на втором уровне - 2000 кг, и так далее.
     * Когда ряды слонов заполняются, следующие слоны поднимаются на один уровень и весят на 1000 кг больше, чем предыдущие.
     *
     * Например, если прочность паутины равна 10000 кг и ширина (длина) равна 3, это означает, что паутина может выдержать вес 10000 кг.
     * Следовательно, количество слонов, которое можно разместить на паутине без ее разрыва, равно 6.
     *
     * Необходимо учесть все возможные значения входных параметров, даже абсурдные, чтобы правильно решить задачу.
     */
    public int getElephantToleranceNumber() {
        // на каждом последующем ряду слоны на 1000 кг тяжелее
        // нужна пирамида от большого основания до одного (3, 2, 1)
        // берем силу и определяем, какую можем сделать пирамиду - т.е. нужно определить сколько слонов поместиться в каждый ряд
        // подумать как разложить число на составные части - как понять сколько слоев сделать?
        // отнимать на каждой итерации, записывать остаток
        int totalElephants = 0; // Общее количество слонов
        int elephantWeight = 1000; // Вес слона на текущем уровне

        for (int level = 1; level <= width; level++) { // Перебираем каждый уровень
            totalElephants += level; // Добавляем количество слонов на текущем уровне к общему количеству

            // Увеличиваем вес для следующего уровня на 1000 кг
            elephantWeight += 1000;
        }

        // Проверяем, выдержит ли паутина вес слонов без разрыва
        if (elephantWeight <= strength) {
            return totalElephants; // Если да, возвращаем общее количество слонов
        } else {
            // Иначе определяем максимальное количество слонов, которое поместится
            int maxElephants = strength / 1000; // Максимальное количество слонов при одном уровне

            // Определяем количество слонов на последнем уровне
            int lastLevelElephants = (strength - ((width - 1) * 1000)) / 1000;

            // Вычисляем общее количество слонов
            return (maxElephants * width) + lastLevelElephants;
        }
    }

    public static void main(String[] args) {
        // ответ 6
        Elephants elephants = new Elephants(10000, 3);
        // ответ 9 WHY????
        Elephants elephants2 = new Elephants(9600, 12);
        System.out.println(elephants.getElephantToleranceNumber());
    }


}
